;(function($){$.fn.messageBoxHandler=function(options){this.config={maxUpdateChars:'140',messageBody:null,submitBtn:null,leftCharsCounterClass:null,counterErrorClass:'counter-error-length',disabledClass:'disabled',emptyMessageText:''};$.extend(this.config,options);this.counter=(this.config.leftCharsCounterClass&&$(this.config.leftCharsCounterClass,this))||$('span:first',this);this.submitBtn=(this.config.submitBtn&&$(this.config.submitBtn))||$('button[type="submit"]:first',this);this.messageBody=(this.config.messageBody&&$(this.config.messageBody))||$('textarea:first',this);this.defaultEmptyMessage=this.messageBody.attr('title')||this.config.emptyMessageText;var self=this;if(this.messageBody.length){this.messageBody.focus(function(){if(self.messageBody.val()==self.defaultEmptyMessage){self.messageBody.val('');}}).blur(function(){if(self.messageBody.val()==self.defaultEmptyMessage||self.messageBody.val()==''){self.messageBody.val(self.defaultEmptyMessage);}}).keyup(function(){var messageLenght=self.messageBody.val().length;var leftChars=self.config.maxUpdateChars-self.messageBody.val().length;$(self.counter).text(leftChars);if((messageLenght>0)&&(leftChars>=0)){self.submitBtn.attr('disabled','').removeClass(self.config.disabledClass);}else{self.submitBtn.attr('disabled','disabled').addClass(self.config.disabledClass);}
if(leftChars<0){self.counter.addClass(self.config.counterErrorClass);}else{self.counter.removeClass(self.config.counterErrorClass);}});self.submitBtn.attr('disabled','disabled').addClass(self.config.disabledClass);}}})(jQuery)